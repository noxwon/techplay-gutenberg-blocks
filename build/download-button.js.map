{"version":3,"file":"download-button.js","mappings":"AAAAA,OAAOC,UAAUC,OAAM,SAASC,GAC5BA,EAAE,oBAAoBC,GAAG,SAAS,SAASC,GACvCA,EAAEC,iBAEF,IAAMC,EAASJ,EAAEK,MACXC,EAAUF,EAAOG,KAAK,QACtBC,EAAWJ,EAAOG,KAAK,YAKb,QAFAD,EAAQG,MAAM,KAAKC,MAAMC,cAIrCC,OAAOC,KAAKP,EAAS,UAGrBN,EAAEc,KAAK,CACHC,IAAKC,eAAeC,QACpBC,KAAM,OACNX,KAAM,CACFY,OAAQ,kBACRC,MAAOJ,eAAeI,MACtBC,SAAUf,GAEdgB,UAAW,CACPC,aAAc,QAElBC,QAAS,SAASC,GAEd,IAAMC,EAAO,IAAIC,KAAK,CAACF,GAAW,CAAEP,KAAMO,EAASP,OAC7CH,EAAMH,OAAOgB,IAAIC,gBAAgBH,GAGjCI,EAAOhC,SAASiC,cAAc,KACpCD,EAAKE,KAAOjB,EACZe,EAAKG,SAAWzB,GAAYF,EAAQG,MAAM,KAAKC,MAC/CZ,SAASoC,KAAKC,YAAYL,GAC1BA,EAAKM,QACLtC,SAASoC,KAAKG,YAAYP,GAG1BlB,OAAOgB,IAAIU,gBAAgBvB,EAC/B,IAKRf,EAAEc,KAAK,CACHC,IAAKC,eAAeC,QACpBC,KAAM,OACNX,KAAM,CACFY,OAAQ,2BACRC,MAAOJ,eAAeI,MACtBC,SAAUf,IAGtB,GACJ","sources":["webpack://techplay-gutenberg-blocks/./src/blocks/download-button/frontend.js"],"sourcesContent":["jQuery(document).ready(function($) {\n    $('.download-button').on('click', function(e) {\n        e.preventDefault();\n        \n        const button = $(this);\n        const fileUrl = button.data('file');\n        const fileName = button.data('filename');\n        \n        // 파일 확장자 확인\n        const fileExt = fileUrl.split('.').pop().toLowerCase();\n        \n        if (fileExt === 'pdf') {\n            // PDF 파일인 경우 새 창에서 열기\n            window.open(fileUrl, '_blank');\n        } else {\n            // 다른 파일은 AJAX를 통해 다운로드\n            $.ajax({\n                url: techplayBlocks.ajaxUrl,\n                type: 'POST',\n                data: {\n                    action: 'secure_download',\n                    nonce: techplayBlocks.nonce,\n                    file_url: fileUrl\n                },\n                xhrFields: {\n                    responseType: 'blob'\n                },\n                success: function(response) {\n                    // Blob URL 생성\n                    const blob = new Blob([response], { type: response.type });\n                    const url = window.URL.createObjectURL(blob);\n                    \n                    // 다운로드 링크 생성 및 클릭\n                    const link = document.createElement('a');\n                    link.href = url;\n                    link.download = fileName || fileUrl.split('/').pop();\n                    document.body.appendChild(link);\n                    link.click();\n                    document.body.removeChild(link);\n                    \n                    // Blob URL 해제\n                    window.URL.revokeObjectURL(url);\n                }\n            });\n        }\n        \n        // 다운로드 카운트 증가\n        $.ajax({\n            url: techplayBlocks.ajaxUrl,\n            type: 'POST',\n            data: {\n                action: 'increment_download_count',\n                nonce: techplayBlocks.nonce,\n                file_url: fileUrl\n            }\n        });\n    });\n}); "],"names":["jQuery","document","ready","$","on","e","preventDefault","button","this","fileUrl","data","fileName","split","pop","toLowerCase","window","open","ajax","url","techplayBlocks","ajaxUrl","type","action","nonce","file_url","xhrFields","responseType","success","response","blob","Blob","URL","createObjectURL","link","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL"],"sourceRoot":""}