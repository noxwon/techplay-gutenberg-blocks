{"version":3,"file":"download-button.js","mappings":";AAAAA,MAAM,CAACC,QAAQ,CAAC,CAACC,KAAK,CAAC,UAASC,CAAC,EAAE;EAC/BA,CAAC,CAAC,kBAAkB,CAAC,CAACC,EAAE,CAAC,OAAO,EAAE,UAASC,CAAC,EAAE;IAC1CA,CAAC,CAACC,cAAc,CAAC,CAAC;IAElB,IAAMC,MAAM,GAAGJ,CAAC,CAAC,IAAI,CAAC;IACtB,IAAMK,OAAO,GAAGD,MAAM,CAACE,IAAI,CAAC,MAAM,CAAC;IACnC,IAAMC,QAAQ,GAAGH,MAAM,CAACE,IAAI,CAAC,UAAU,CAAC;;IAExC;IACA,IAAME,OAAO,GAAGH,OAAO,CAACI,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;IAEtD,IAAIH,OAAO,KAAK,KAAK,EAAE;MACnB;MACAI,MAAM,CAACC,IAAI,CAACR,OAAO,EAAE,QAAQ,CAAC;IAClC,CAAC,MAAM;MACH;MACAL,CAAC,CAACc,IAAI,CAAC;QACHC,GAAG,EAAEC,cAAc,CAACC,OAAO;QAC3BC,IAAI,EAAE,MAAM;QACZZ,IAAI,EAAE;UACFa,MAAM,EAAE,iBAAiB;UACzBC,KAAK,EAAEJ,cAAc,CAACI,KAAK;UAC3BC,QAAQ,EAAEhB;QACd,CAAC;QACDiB,SAAS,EAAE;UACPC,YAAY,EAAE;QAClB,CAAC;QACDC,OAAO,EAAE,SAATA,OAAOA,CAAWC,QAAQ,EAAE;UACxB;UACA,IAAMC,IAAI,GAAG,IAAIC,IAAI,CAAC,CAACF,QAAQ,CAAC,EAAE;YAAEP,IAAI,EAAEO,QAAQ,CAACP;UAAK,CAAC,CAAC;UAC1D,IAAMH,GAAG,GAAGH,MAAM,CAACgB,GAAG,CAACC,eAAe,CAACH,IAAI,CAAC;;UAE5C;UACA,IAAMI,IAAI,GAAGhC,QAAQ,CAACiC,aAAa,CAAC,GAAG,CAAC;UACxCD,IAAI,CAACE,IAAI,GAAGjB,GAAG;UACfe,IAAI,CAACG,QAAQ,GAAG1B,QAAQ,IAAIF,OAAO,CAACI,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAAC,CAAC;UACpDZ,QAAQ,CAACoC,IAAI,CAACC,WAAW,CAACL,IAAI,CAAC;UAC/BA,IAAI,CAACM,KAAK,CAAC,CAAC;UACZtC,QAAQ,CAACoC,IAAI,CAACG,WAAW,CAACP,IAAI,CAAC;;UAE/B;UACAlB,MAAM,CAACgB,GAAG,CAACU,eAAe,CAACvB,GAAG,CAAC;QACnC;MACJ,CAAC,CAAC;IACN;;IAEA;IACAf,CAAC,CAACc,IAAI,CAAC;MACHC,GAAG,EAAEC,cAAc,CAACC,OAAO;MAC3BC,IAAI,EAAE,MAAM;MACZZ,IAAI,EAAE;QACFa,MAAM,EAAE,0BAA0B;QAClCC,KAAK,EAAEJ,cAAc,CAACI,KAAK;QAC3BC,QAAQ,EAAEhB;MACd;IACJ,CAAC,CAAC;EACN,CAAC,CAAC;AACN,CAAC,CAAC,C","sources":["webpack://techplay-gutenberg-blocks/./src/blocks/download-button/frontend.js"],"sourcesContent":["jQuery(document).ready(function($) {\n    $('.download-button').on('click', function(e) {\n        e.preventDefault();\n        \n        const button = $(this);\n        const fileUrl = button.data('file');\n        const fileName = button.data('filename');\n        \n        // 파일 확장자 확인\n        const fileExt = fileUrl.split('.').pop().toLowerCase();\n        \n        if (fileExt === 'pdf') {\n            // PDF 파일인 경우 새 창에서 열기\n            window.open(fileUrl, '_blank');\n        } else {\n            // 다른 파일은 AJAX를 통해 다운로드\n            $.ajax({\n                url: techplayBlocks.ajaxUrl,\n                type: 'POST',\n                data: {\n                    action: 'secure_download',\n                    nonce: techplayBlocks.nonce,\n                    file_url: fileUrl\n                },\n                xhrFields: {\n                    responseType: 'blob'\n                },\n                success: function(response) {\n                    // Blob URL 생성\n                    const blob = new Blob([response], { type: response.type });\n                    const url = window.URL.createObjectURL(blob);\n                    \n                    // 다운로드 링크 생성 및 클릭\n                    const link = document.createElement('a');\n                    link.href = url;\n                    link.download = fileName || fileUrl.split('/').pop();\n                    document.body.appendChild(link);\n                    link.click();\n                    document.body.removeChild(link);\n                    \n                    // Blob URL 해제\n                    window.URL.revokeObjectURL(url);\n                }\n            });\n        }\n        \n        // 다운로드 카운트 증가\n        $.ajax({\n            url: techplayBlocks.ajaxUrl,\n            type: 'POST',\n            data: {\n                action: 'increment_download_count',\n                nonce: techplayBlocks.nonce,\n                file_url: fileUrl\n            }\n        });\n    });\n}); "],"names":["jQuery","document","ready","$","on","e","preventDefault","button","fileUrl","data","fileName","fileExt","split","pop","toLowerCase","window","open","ajax","url","techplayBlocks","ajaxUrl","type","action","nonce","file_url","xhrFields","responseType","success","response","blob","Blob","URL","createObjectURL","link","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL"],"sourceRoot":""}